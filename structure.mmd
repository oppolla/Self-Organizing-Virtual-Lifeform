flowchart TD
    UserPrompt([User Prompt]) --> BaseLLM([Base LLM])
    UserPrompt --> ScaffoldLLM([Scaffold LLM])
    BaseLLM --> CrossAttention([Cross-Attention Layer])
    ScaffoldLLM --> CrossAttention
    CrossAttention --> TokenMap([Token Map Layer])
    TokenMap --> Log([Log])
    TokenMap --> SleepScheduler([Sleep Scheduler])
    SleepScheduler --> Gestation([Gestation Phase])
    Gestation --> Dreaming([Dream Mechanism])

    %% Feedback Paths
    Log --> UserPrompt
    Dreaming --> BaseLLM
    Dreaming --> ScaffoldLLM
    Gestation --> SleepScheduler
    TokenMap --> CrossAttention
    CrossAttention --> UserPrompt
